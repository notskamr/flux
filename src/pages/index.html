<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="color-scheme" content="light dark"><title>Flux</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.red.min.css"></head><body class="container"><header><h1>Flux</h1><p style="margin-bottom:4px">A simple, data streaming service that takes advantage of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events" target="_blank">Server-Sent Events (SSE)</a>.</p><div class="fluxpoint-count"><span aria-busy="true"></span></div><a href="/new" target="_blank" role="button" class="contrast" style="padding-top:.25rem;padding-bottom:.25rem;margin-top:1rem">New +</a></header><main><h2>Usage</h2><p>To use Flux, simply send a POST request to the <code>/flux/{id}</code> endpoint with the data you want to stream, along with a Bearer token in the Authorization header.</p><p>The <code>{id}</code> parameter is a unique identifier for the stream. You can use an <code>EventSource</code> object to listen for updates on the stream at the <code>/flux/{id}</code> endpoint.</p><h2>Routes</h2><ul><li><code>POST /new</code> - Creates a new stream and responds with:<ul><li><code>id</code> - The unique identifier for the stream.</li><li><code>key</code> - The Bearer token to use when updating the stream.</li></ul></p></li><li><code>POST /flux/{id}</code> - Update the stream with the given ID (any data sent in the request body will be streamed to clients). The request must include the <code>key</code> as a Bearer token in the Authorization header.</li><li><p><code>GET /flux/{id}?onFirst=true</code> - Listen for updates on the stream with the given ID.</p><ul><li><code>onFirst</code> <i><small>(optional)</small></i> - If set to <code>true</code>, the client will receive the last update sent to the stream when they connect.</li></ul><pre>

    const eventSource = new EventSource('/flux/{id}');
    eventSource.onmessage = (event) => {
        console.log(event.data);
    };
                </pre></p></li></ul></main><footer>created by <a href="https://vsahni.me" class="contrast" target="_blank">varun sahni</a></footer><script>const count=document.querySelector('.fluxpoint-count span');fetch("/fluxpoints").then(res=>res.json()).then(data=>{count.setAttribute('aria-busy','false');count.textContent=`${data.count} fluxpoint(s) currently active.`;});</script><style>.fluxpoint-count{font-size:.8rem}footer{text-align:center;}</style></body></html>